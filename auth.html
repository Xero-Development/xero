<!DOCTYPE html>
<html lang="en" class="x-app">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>PX-OS | Auth</title>

  <!-- X CSS system -->
  <link rel="stylesheet" href="./x-layout.css" />
  <link rel="stylesheet" href="./x-components.css" />
  <link rel="stylesheet" href="./x-forms.css" />
  <link rel="stylesheet" href="./x-icons.css" />
  <link rel="stylesheet" href="./x-animations.css" />
  <link rel="stylesheet" href="./x-styles.css" />

  <!-- Auth-only glue (small, non-invasive) -->
  <style>
    .x-auth-wrap {
      max-width: 520px;
      margin: 0 auto;
      padding: 28px 16px;
    }

    .x-auth-head {
      display: flex;
      flex-direction: column;
      gap: 8px;
      margin-bottom: 14px;
    }

    .x-auth-sub {
      opacity: 0.85;
    }

    .x-tabs {
      display: flex;
      gap: 10px;
      margin: 14px 0 10px;
    }

    .x-tab {
      flex: 1;
      padding: 10px 12px;
      border-radius: 10px;
      cursor: pointer;
      border: 1px solid rgba(255,255,255,0.12);
      background: rgba(255,255,255,0.04);
      color: inherit;
      font-weight: 600;
    }

    .x-tab.active {
      border-color: rgba(102,204,255,0.75);
      color: var(--x-accent, #6cf);
      background: rgba(102,204,255,0.10);
    }

    .x-auth-form {
      display: none;
      flex-direction: column;
      gap: 12px;
      margin-top: 10px;
    }

    .x-auth-form.active {
      display: flex;
    }

    /* If your x-forms already defines these, great. If not, this prevents “unstyled inputs”. */
    .x-input, .x-select, .x-textarea {
      width: 100%;
      padding: 10px 12px;
      border-radius: 10px;
      border: 1px solid rgba(255,255,255,0.12);
      background: rgba(0,0,0,0.18);
      color: inherit;
      outline: none;
    }

    .x-input:focus, .x-select:focus, .x-textarea:focus {
      border-color: rgba(102,204,255,0.75);
      box-shadow: 0 0 0 3px rgba(102,204,255,0.12);
    }

    .x-button {
      padding: 10px 14px;
      border-radius: 10px;
      border: 0;
      cursor: pointer;
      font-weight: 700;
      background: var(--x-accent, #6cf);
      color: #000;
      text-decoration: none;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
    }

    .x-button-ghost {
      background: rgba(255,255,255,0.06);
      color: inherit;
      border: 1px solid rgba(255,255,255,0.12);
    }

    .x-auth-note {
      margin-top: 12px;
      opacity: 0.85;
      font-size: 0.95rem;
      line-height: 1.4;
    }

    .x-row {
      display: flex;
      gap: 10px;
      flex-wrap: wrap;
      align-items: center;
      justify-content: space-between;
      margin-top: 10px;
    }

    .x-muted {
      opacity: 0.8;
    }
  </style>
</head>

<body class="x-app">

  <!-- Navbar -->
  <nav class="x-navbar">
    <div class="x-navbar-left">
      <span class="x-navbar-brand">Project X</span>
    </div>

    <div class="x-navbar-center">
      <a class="x-nav-link" href="./index.html">Home</a>
      <a class="x-nav-link" href="./about.html">About</a>
      <a class="x-nav-link" href="./docs.html">Docs</a>
      <a class="x-nav-link" href="./support.html">Support</a>
      <a class="x-nav-link x-accent" href="./apply.html">Apply</a>
      <a class="x-nav-link active" href="./auth.html">Auth</a>
    </div>
  </nav>

  <main class="x-container">
    <div class="x-auth-wrap">
      <section class="x-card">
        <div class="x-auth-head">
          <h1>Account</h1>
          <p class="x-auth-sub x-muted">
            This is request-based auth for now. It emails the team. No passwords collected because we’re not doing security theater.
          </p>
        </div>

        <div class="x-tabs">
          <button class="x-tab active" type="button" data-tab="login">Login</button>
          <button class="x-tab" type="button" data-tab="register">Register</button>
        </div>

        <!-- LOGIN -->
        <form class="x-auth-form active" id="loginForm">
          <label>
            Email
            <input class="x-input" type="email" name="email" placeholder="you@example.com" required />
          </label>

          <div class="x-row">
            <button class="x-button" type="submit">Request Login</button>
            <a class="x-button x-button-ghost" href="./dashboard.html">Go to Dashboard</a>
          </div>

          <div class="x-auth-note x-muted" id="loginStatus"></div>
        </form>

        <!-- REGISTER -->
        <form class="x-auth-form" id="registerForm">
          <label>
            Username
            <input class="x-input" type="text" name="username" placeholder="Your username" required />
          </label>

          <label>
            Email
            <input class="x-input" type="email" name="email" placeholder="you@example.com" required />
          </label>

          <label>
            Discord Username
            <input class="x-input" type="text" name="discord" placeholder="user#0000 or @user" required />
          </label>

          <label>
            Role
            <select class="x-select" name="role" required>
              <option value="">Select one</option>
              <option value="Developer">Developer</option>
              <option value="Designer">Designer</option>
              <option value="Moderator">Moderator</option>
              <option value="Support">Support</option>
              <option value="Other">Other</option>
            </select>
          </label>

          <label>
            Why should we accept you?
            <textarea class="x-textarea" name="message" rows="5" placeholder="Be specific. ‘I’m active’ is not a skill." required></textarea>
          </label>

          <div class="x-row">
            <button class="x-button" type="submit">Request Account</button>
            <a class="x-button x-button-ghost" href="./apply.html">Open Apply Page</a>
          </div>

          <div class="x-auth-note x-muted" id="registerStatus"></div>
        </form>
      </section>
    </div>
  </main>

  <script>
    const ADMIN_EMAIL = "teamxdevelopments@gmail.com";

    // Tabs
    const tabs = document.querySelectorAll(".x-tab");
    const forms = document.querySelectorAll(".x-auth-form");

    tabs.forEach(btn => {
      btn.addEventListener("click", () => {
        tabs.forEach(t => t.classList.remove("active"));
        forms.forEach(f => f.classList.remove("active"));

        btn.classList.add("active");
        const id = btn.dataset.tab === "login" ? "loginForm" : "registerForm";
        document.getElementById(id).classList.add("active");
      });
    });

    function openMail(subject, body) {
      const url =
        `mailto:${ADMIN_EMAIL}` +
        `?subject=${encodeURIComponent(subject)}` +
        `&body=${encodeURIComponent(body)}`;

      window.location.href = url;
    }

    // Login request (email only, no passwords)
    document.getElementById("loginForm").addEventListener("submit", (e) => {
      e.preventDefault();
      const email = e.target.email.value.trim();
      const status = document.getElementById("loginStatus");

      openMail(
        "PX-OS Login Request",
        `Email: ${email}\n\nUser is requesting login access.\n(Password not collected.)`
      );

      status.textContent = "Opening your email client… send the email to complete the request. Then you can continue to the dashboard.";
    });

    // Register request
    document.getElementById("registerForm").addEventListener("submit", (e) => {
      e.preventDefault();
      const data = new FormData(e.target);
      const status = document.getElementById("registerStatus");

      openMail(
        "PX-OS Registration Request",
        [
          `Username: ${data.get("username")}`,
          `Email: ${data.get("email")}`,
          `Discord: ${data.get("discord")}`,
          `Role: ${data.get("role")}`,
          "",
          "Message:",
          data.get("message")
        ].join("\n")
      );

      status.textContent = "Opening your email client… send the email to submit your request.";
    });
  </script>

</body>
</html>
